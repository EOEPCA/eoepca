apiVersion: v1
kind: Namespace
metadata:
  creationTimestamp: null
  name: eoepca
spec: {}
status: {}
---
apiVersion: v1
kind: ServiceAccount
metadata:
  creationTimestamp: null
  name: ades
  namespace: eoepca
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  creationTimestamp: null
  name: ades-cluster-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: ades
  namespace: eoepca
---
apiVersion: v1
data:
  CATALOG_APIKEY: QUtDcDhoeUVZU01xazRzd1VuZHlDRFZaVzdnM1hGWWZ2RTJ4VkZRRWRZYWdKTHFWSlkxcUtiWGNtU3RMb1VGRXlFaEw1dEtjWQ==
  CATALOG_ENDPOINT: aHR0cHM6Ly9jYXRhbG9nLnRlcnJhZHVlLmNvbS9yY29ud2F5
  CATALOG_USERNAME: cmNvbndheQ==
  KUBECONFIG: /var/etc/kubeconfig
  STORAGE_APIKEY: dGVsZXNwYXppbw==
  STORAGE_CLASS: standard
  STORAGE_HOST: aHR0cDovL3dvcmtzcGFjZS5kZWZhdWx0Lw==
  STORAGE_USERNAME: ZW9lcGNh
  VOLUME_SIZE: "4"
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: ades-config
  namespace: eoepca
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ades-config-pv-claim
  namespace: eoepca
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: standard
  resources:
    requests:
      storage: 100Mi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ades-user-data-pv-claim
  namespace: eoepca
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: standard
  resources:
    requests:
      storage: 10Gi
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: ades-processing-services-pv-claim
  namespace: eoepca
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: standard
  resources:
    requests:
      storage: 5Gi
---
apiVersion: apps/v1
kind: Deployment
metadata:
  labels:
    app: ades
  name: ades-deployment
  namespace: eoepca
spec:
  replicas: 1
  strategy:
    type: Recreate
  selector:
    matchLabels:
      app: ades
  template:
    metadata:
      labels:
        app: ades
    spec:
      containers:
        - name: ades
          envFrom:
            - configMapRef:
                name: ades-config
          image: eoepca/proc-ades:latest
          imagePullPolicy: IfNotPresent
          resources:
            requests:
              memory: "2Gi"
              cpu: "1"
              ephemeral-storage: "2Gi"
            limits:
              memory: "4Gi"
              cpu: "2"
              ephemeral-storage: "5Gi"
          ports:
            - containerPort: 80
          volumeMounts:
            - name: ades-config
              mountPath: /var/etc/ades
            - name: ades-user-data
              mountPath: /var/www/html/res
            - name: ades-processing-services
              mountPath: /opt/zooservices_user
            - name: kubeconfig-volume
            #zzz   mountPath: /var/etc/ades/kubeconfig
              mountPath: /var/etc/kubeconfig
              subPath: config
      volumes:
        - name: ades-config
          persistentVolumeClaim:
            claimName: ades-config-pv-claim
        - name: ades-user-data
          persistentVolumeClaim:
                claimName: ades-user-data-pv-claim
        - name: ades-processing-services
          persistentVolumeClaim:
                claimName: ades-processing-services-pv-claim
        - name: kubeconfig-volume
          configMap:
            name: ades-kubeconfig
      restartPolicy: Always
---
apiVersion: v1
data:
  kubeconfig: |
    apiVersion: v1
    clusters:
    - cluster:
        certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwdGFXNXAKYTNWaVpVTkJNQjRYRFRJd01Ea3lNekV3TVRBek4xb1hEVE13TURreU1qRXdNVEF6TjFvd0ZURVRNQkVHQTFVRQpBeE1LYldsdWFXdDFZbVZEUVRDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBS29pCmNReUtraUpxOU9jVE1iODNTVS8wdHBvRWRmOWJ0dkY2RWNLQkoxQzFhQ2MzSEd6N0ZFL0JWcEJiOXpoZ0psWGoKUkVZNXEzeUJWZEQyb0tQQ2U1SHZoMUpPV3YxOEtFMXVvOFFXM3ZvWU9MVG1hOVpYMEVyQ0UzeW9oNjltL0VWdQpNa0xIWllzTndSTmlxMHhSNHJLVXh1RkRUK3B3Y0RrN054dVE3ODNJZnpxYVVkQUJaQ2tlRjdqZVFxeC9DS0lDCjJuZVJwTk5iQnFqcWROTDR6UlR3S3I0UUVHNlBva3Zjb0wwL0g5Z0xSMVVzY1JDVTJyb3JtN2FlWklIYlJzWDIKTjArb1B1QUpPaDEwd2w4cURKZGV5cW00TFhzY1NWZFdEU0ZwUnVXMlJJaHdVVzZ4Z282Q0hNZVNkV3BMM05ucgpTeFJ1T3N0R3E0Ry9hai9XYzRrQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUIwR0ExVWRKUVFXCk1CUUdDQ3NHQVFVRkJ3TUNCZ2dyQmdFRkJRY0RBVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDZmoxclZtZG1CYlkyYmFtdUxpRVhzRlBoYWpnbERIUjJmVGVHTXhnTmlQa0E0VWFEYgo0M3ZVYmg3ejJaZUgwTWI5SjB6S2pxZVdPK0NudnoxYmFFbmVqSFBtTEZoT1llL09RUGlWdGVZS00zNW8zanZzCnpjQjVyUVE2UFFhN3NNQVA1NFhNTkJJUTFycXh2RUt1Wm1ySUhqNHRlY2drazl0N3FBZlNDSDIxeU9NOHQyUnIKV1FNOTYwMjJ1YjByUUxsdlR4T25hLzFnZXFhYXBnYUs0c2k5MitFY3Vya3E5TW8xTGNRQTN1bHRuQ0t5MnlIZQpIaS9Cb3QzdWRhMmd5Rk82U0c4UGdOdEJwRERmOWFsOXBBajRELytyT2J1QStMQmZCaTlVSGJuQ3ozcyt5aWNFCldkNFB6ejhtRWlkd3R0YVM5OU81SHZKWmR6VzdqUjBLMjM2UgotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        server: https://172.17.0.3:8443
      name: minikube
    contexts:
    - context:
        cluster: minikube
        namespace: eoepca
        user: ades
      name: ades-context
    current-context: ades-context
    kind: Config
    preferences: {}
    users:
    - name: ades
      user:
        token: eyJhbGciOiJSUzI1NiIsImtpZCI6ImVLVEd4djZCUTgwZUlIMzhmMmdrb0F3YmpKaU54SVlQWXpRWW01YTh4VVkifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJlb2VwY2EiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlY3JldC5uYW1lIjoiYWRlcy10b2tlbi1tc2xkeCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50Lm5hbWUiOiJhZGVzIiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQudWlkIjoiNzk1MjQxYWMtOWI5YS00MjEwLWE3NDYtMzkzYjg1NjZjYTc4Iiwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50OmVvZXBjYTphZGVzIn0.WWr2b5EJr0yxWOCK8tjsE2WEZxm_yU1QnBNDY1r2t6s45msY_rugxI3VJZTnG-3wif9CbkYjrc6Q25ff7BqvDvO-2DsMksfvWaQSX6l901Bn1P39hWU1NN4z2dgu6RbdpwAVCgt9IK5NTAoftHY0GyWaAGtxxECL8IMKSKeDRGsmiPJdqfmvOE3t0MhMsWa8lU_95gDz4ZJEKtRUX7YWheCqAYUrEpVI3enGDNAWjyoMCT_SHEDYZ8ond9b6esGbk8biecSh7XUNZmIXvZwJu1mGlyMiPeBWorwUi8NBI9xP-bmqhFSkWorA_toZ9mONWFMsJsB-hEDUxUUOA-WQdw
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: ades-kubeconfig
  namespace: eoepca
