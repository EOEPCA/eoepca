apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: workspace-api-pep
  namespace: rm
spec:
  chart:
    spec:
      chart: pep-engine
      version: 0.9.31
      sourceRef:
        kind: HelmRepository
        name: eoepca
        namespace: common
  values:
    global:
      context: workspace-api
      pep: workspace-api-pep
      domain: develop.eoepca.org
      nginxIp: 185.52.192.231
      resourceServer:
        name: workspace-api-rm-workspace-api
        port: 8080
      certManager:
        clusterIssuer: letsencrypt
    configMap:
      workingMode: FULL
      asHostname: auth
      pdpHostname: auth
    nginxIntegration:
      enabled: false
    # image:
    #   pullPolicy: Always
    volumeClaim:
      name: eoepca-resman-pvc
      create: false

  timeout: 25m0s
  interval: 1m0s
