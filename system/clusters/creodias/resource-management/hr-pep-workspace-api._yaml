apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: workspace-api-pep
  namespace: rm
spec:
  chart:
    spec:
      chart: pep-engine
      version: 0.9.38
      sourceRef:
        kind: HelmRepository
        name: eoepca
        namespace: common
  values:
    imagePullSecrets:
      - name: regcred    
    global:
      context: workspace-api
      pep: workspace-api-pep
      domain: mundi.eoepca.org
      nginxIp: 80.158.54.66
      resourceServer:
        name: workspace-api-rm-workspace-api
        port: 8080
      certManager:
        clusterIssuer: letsencrypt
    configMap:
      resourceServer: http://workspace-api:8080
    # image:
    #   pullPolicy: Always
    certManager:
      clusterIssuer: letsencrypt
    volumeClaim:
      name: eoepca-resman-pvc
      create: false

  timeout: 25m0s
  interval: 1m0s
